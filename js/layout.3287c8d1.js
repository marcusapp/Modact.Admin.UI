"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[7225],{20306:function(e,t,i){i.r(t),i.d(t,{default:function(){return Ct}});var l=i(66252),a=i(3577);const s={class:"adminui-header"},n={class:"adminui-header-left"},o={class:"logo-bar"},u=(0,l._)("img",{class:"logo",src:"img/logo.png"},null,-1),r={key:0,class:"nav"},m=["onClick"],c={class:"adminui-header-right"},d={class:"aminui-wrapper"},h={key:0,class:"adminui-side-top"},p={class:"adminui-side-scroll"},g={class:"aminui-body el-container"},f={class:"adminui-main",id:"adminui-main"},w={class:"adminui-header"},k={class:"adminui-header-left"},v={class:"logo-bar"},_=(0,l._)("img",{class:"logo",src:"img/logo.png"},null,-1),y={class:"adminui-header-right"},b={class:"aminui-wrapper"},$={class:"adminui-side-scroll"},C={class:"aminui-body el-container"},T={class:"adminui-main",id:"adminui-main"},W={class:"adminui-header"},L={class:"adminui-header-left"},x={class:"logo-bar"},O=(0,l._)("img",{class:"logo",src:"img/logo.png"},null,-1),I={class:"adminui-header-right"},M={key:0,class:"adminui-header-menu"},D={class:"aminui-wrapper"},E={class:"aminui-body el-container"},A={class:"adminui-main",id:"adminui-main"},P={key:3,class:"aminui-wrapper"},N={key:0,class:"aminui-side-split"},V={class:"aminui-side-split-top"},U=["title"],q={class:"adminui-side-split-scroll"},j=["onClick"],z={key:0,class:"adminui-side-top"},F={class:"adminui-side-scroll"},R={class:"aminui-body el-container"},S={class:"adminui-main",id:"adminui-main"};function H(e,t,i,H,Y,G){const K=(0,l.up)("el-icon"),B=(0,l.up)("userbar"),Z=(0,l.up)("NavMenu"),Q=(0,l.up)("el-menu"),X=(0,l.up)("el-scrollbar"),J=(0,l.up)("el-icon-expand"),ee=(0,l.up)("el-icon-fold"),te=(0,l.up)("Side-m"),ie=(0,l.up)("Topbar"),le=(0,l.up)("Tags"),ae=(0,l.up)("router-view"),se=(0,l.up)("iframe-view"),ne=(0,l.up)("router-link"),oe=(0,l.up)("el-icon-close"),ue=(0,l.up)("setting"),re=(0,l.up)("el-drawer"),me=(0,l.up)("auto-exit");return(0,l.wg)(),(0,l.iD)(l.HY,null,["header"==G.layout?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("header",s,[(0,l._)("div",n,[(0,l._)("div",o,[u,(0,l._)("span",null,(0,a.zw)(e.$CONFIG.APP_NAME),1)]),G.ismobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("ul",r,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Y.menu,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e,class:(0,a.C_)(Y.pmenu.path==e.path?"active":""),onClick:t=>G.showMenu(e)},[(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)((0,l.LL)(e.meta.icon||"el-icon-menu")))])),_:2},1024),(0,l._)("span",null,(0,a.zw)(e.meta.title),1)],10,m)))),128))]))]),(0,l._)("div",c,[(0,l.Wm)(B)])]),(0,l._)("section",d,[!G.ismobile&&Y.nextMenu.length>0||!Y.pmenu.component?((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,a.C_)(G.menuIsCollapse?"aminui-side isCollapse":"aminui-side")},[G.menuIsCollapse?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",h,[(0,l._)("h2",null,(0,a.zw)(Y.pmenu.meta.title),1)])),(0,l._)("div",p,[(0,l.Wm)(X,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{"default-active":Y.active,router:"",collapse:G.menuIsCollapse,"unique-opened":e.$CONFIG.MENU_UNIQUE_OPENED},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{navMenus:Y.nextMenu},null,8,["navMenus"])])),_:1},8,["default-active","collapse","unique-opened"])])),_:1})]),(0,l._)("div",{class:"adminui-side-bottom",onClick:t[0]||(t[0]=t=>e.$store.commit("TOGGLE_menuIsCollapse"))},[(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[G.menuIsCollapse?((0,l.wg)(),(0,l.j4)(J,{key:0})):((0,l.wg)(),(0,l.j4)(ee,{key:1}))])),_:1})])],2)):(0,l.kq)("",!0),G.ismobile?((0,l.wg)(),(0,l.j4)(te,{key:1})):(0,l.kq)("",!0),(0,l._)("div",g,[G.ismobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(ie,{key:0})),!G.ismobile&&G.layoutTags?((0,l.wg)(),(0,l.j4)(le,{key:1})):(0,l.kq)("",!0),(0,l._)("div",f,[(0,l.Wm)(ae,null,{default:(0,l.w5)((({Component:t})=>[((0,l.wg)(),(0,l.j4)(l.Ob,{include:this.$store.state.keepAlive.keepLiveRoute},[e.$store.state.keepAlive.routeShow?((0,l.wg)(),(0,l.j4)((0,l.LL)(t),{key:e.$route.fullPath})):(0,l.kq)("",!0)],1032,["include"]))])),_:1}),(0,l.Wm)(se)])])])],64)):"menu"==G.layout?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l._)("header",w,[(0,l._)("div",k,[(0,l._)("div",v,[_,(0,l._)("span",null,(0,a.zw)(e.$CONFIG.APP_NAME),1)])]),(0,l._)("div",y,[(0,l.Wm)(B)])]),(0,l._)("section",b,[G.ismobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,a.C_)(G.menuIsCollapse?"aminui-side isCollapse":"aminui-side")},[(0,l._)("div",$,[(0,l.Wm)(X,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{"default-active":Y.active,router:"",collapse:G.menuIsCollapse,"unique-opened":e.$CONFIG.MENU_UNIQUE_OPENED},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{navMenus:Y.menu},null,8,["navMenus"])])),_:1},8,["default-active","collapse","unique-opened"])])),_:1})]),(0,l._)("div",{class:"adminui-side-bottom",onClick:t[1]||(t[1]=t=>e.$store.commit("TOGGLE_menuIsCollapse"))},[(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[G.menuIsCollapse?((0,l.wg)(),(0,l.j4)(J,{key:0})):((0,l.wg)(),(0,l.j4)(ee,{key:1}))])),_:1})])],2)),G.ismobile?((0,l.wg)(),(0,l.j4)(te,{key:1})):(0,l.kq)("",!0),(0,l._)("div",C,[G.ismobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(ie,{key:0})),!G.ismobile&&G.layoutTags?((0,l.wg)(),(0,l.j4)(le,{key:1})):(0,l.kq)("",!0),(0,l._)("div",T,[(0,l.Wm)(ae,null,{default:(0,l.w5)((({Component:t})=>[((0,l.wg)(),(0,l.j4)(l.Ob,{include:this.$store.state.keepAlive.keepLiveRoute},[e.$store.state.keepAlive.routeShow?((0,l.wg)(),(0,l.j4)((0,l.LL)(t),{key:e.$route.fullPath})):(0,l.kq)("",!0)],1032,["include"]))])),_:1}),(0,l.Wm)(se)])])])],64)):"dock"==G.layout?((0,l.wg)(),(0,l.iD)(l.HY,{key:2},[(0,l._)("header",W,[(0,l._)("div",L,[(0,l._)("div",x,[O,(0,l._)("span",null,(0,a.zw)(e.$CONFIG.APP_NAME),1)])]),(0,l._)("div",I,[G.ismobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",M,[(0,l.Wm)(Q,{mode:"horizontal","default-active":Y.active,router:"","background-color":"#222b45","text-color":"#fff","active-text-color":"var(--el-color-primary)"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{navMenus:Y.menu},null,8,["navMenus"])])),_:1},8,["default-active"])])),G.ismobile?((0,l.wg)(),(0,l.j4)(te,{key:1})):(0,l.kq)("",!0),(0,l.Wm)(B)])]),(0,l._)("section",D,[(0,l._)("div",E,[!G.ismobile&&G.layoutTags?((0,l.wg)(),(0,l.j4)(le,{key:0})):(0,l.kq)("",!0),(0,l._)("div",A,[(0,l.Wm)(ae,null,{default:(0,l.w5)((({Component:t})=>[((0,l.wg)(),(0,l.j4)(l.Ob,{include:this.$store.state.keepAlive.keepLiveRoute},[e.$store.state.keepAlive.routeShow?((0,l.wg)(),(0,l.j4)((0,l.LL)(t),{key:e.$route.fullPath})):(0,l.kq)("",!0)],1032,["include"]))])),_:1}),(0,l.Wm)(se)])])])],64)):((0,l.wg)(),(0,l.iD)("section",P,[G.ismobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",N,[(0,l._)("div",V,[(0,l.Wm)(ne,{to:e.$CONFIG.DASHBOARD_URL},{default:(0,l.w5)((()=>[(0,l._)("img",{class:"logo",title:e.$CONFIG.APP_NAME,src:"img/logo-r.png"},null,8,U)])),_:1},8,["to"])]),(0,l._)("div",q,[(0,l.Wm)(X,null,{default:(0,l.w5)((()=>[(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Y.menu,(t=>((0,l.wg)(),(0,l.iD)("li",{key:t,class:(0,a.C_)(Y.pmenu.path==t.path?"active":""),onClick:e=>G.showMenu(t)},[(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)((0,l.LL)(t.meta.icon||e.el-e.icon-Y.menu)))])),_:2},1024),(0,l._)("p",null,(0,a.zw)(t.meta.title),1)],10,j)))),128))])])),_:1})])])),!G.ismobile&&Y.nextMenu.length>0||!Y.pmenu.component?((0,l.wg)(),(0,l.iD)("div",{key:1,class:(0,a.C_)(G.menuIsCollapse?"aminui-side isCollapse":"aminui-side")},[G.menuIsCollapse?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",z,[(0,l._)("h2",null,(0,a.zw)(Y.pmenu.meta.title),1)])),(0,l._)("div",F,[(0,l.Wm)(X,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{"default-active":Y.active,router:"",collapse:G.menuIsCollapse,"unique-opened":e.$CONFIG.MENU_UNIQUE_OPENED},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{navMenus:Y.nextMenu},null,8,["navMenus"])])),_:1},8,["default-active","collapse","unique-opened"])])),_:1})]),(0,l._)("div",{class:"adminui-side-bottom",onClick:t[2]||(t[2]=t=>e.$store.commit("TOGGLE_menuIsCollapse"))},[(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[G.menuIsCollapse?((0,l.wg)(),(0,l.j4)(J,{key:0})):((0,l.wg)(),(0,l.j4)(ee,{key:1}))])),_:1})])],2)):(0,l.kq)("",!0),G.ismobile?((0,l.wg)(),(0,l.j4)(te,{key:2})):(0,l.kq)("",!0),(0,l._)("div",R,[(0,l.Wm)(ie,null,{default:(0,l.w5)((()=>[(0,l.Wm)(B)])),_:1}),!G.ismobile&&G.layoutTags?((0,l.wg)(),(0,l.j4)(le,{key:0})):(0,l.kq)("",!0),(0,l._)("div",S,[(0,l.Wm)(ae,null,{default:(0,l.w5)((({Component:t})=>[((0,l.wg)(),(0,l.j4)(l.Ob,{include:this.$store.state.keepAlive.keepLiveRoute},[e.$store.state.keepAlive.routeShow?((0,l.wg)(),(0,l.j4)((0,l.LL)(t),{key:e.$route.fullPath})):(0,l.kq)("",!0)],1032,["include"]))])),_:1}),(0,l.Wm)(se)])])])),(0,l._)("div",{class:"main-maximize-exit",onClick:t[3]||(t[3]=(...e)=>G.exitMaximize&&G.exitMaximize(...e))},[(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(oe)])),_:1})]),(0,l.Wm)(re,{title:"佈局實時演示",modelValue:Y.settingDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>Y.settingDialog=e),size:400,"append-to-body":"","destroy-on-close":""},{default:(0,l.w5)((()=>[(0,l.Wm)(ue)])),_:1},8,["modelValue"]),(0,l.Wm)(me)],64)}i(57658);const Y=e=>((0,l.dD)("data-v-a483418e"),e=e(),(0,l.Cn)(),e),G={class:"logo-bar"},K=Y((()=>(0,l._)("img",{class:"logo",src:"img/logo.png"},null,-1)));function B(e,t,i,s,n,o){const u=(0,l.up)("el-icon-menu"),r=(0,l.up)("el-icon"),m=(0,l.up)("el-header"),c=(0,l.up)("NavMenu"),d=(0,l.up)("el-menu"),h=(0,l.up)("el-scrollbar"),p=(0,l.up)("el-main"),g=(0,l.up)("el-container"),f=(0,l.up)("el-drawer"),w=(0,l.Q2)("drag");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",{ref:"",class:"mobile-nav-button",onClick:t[0]||(t[0]=e=>o.showMobileNav(e)),draggable:"false"},[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u)])),_:1})])),[[w]]),(0,l.Wm)(f,{ref:"mobileNavBox",title:"移动端菜单",size:240,modelValue:n.nav,"onUpdate:modelValue":t[1]||(t[1]=e=>n.nav=e),direction:"ltr","with-header":!1,"destroy-on-close":""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"mobile-nav"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l._)("div",G,[K,(0,l._)("span",null,(0,a.zw)(e.$CONFIG.APP_NAME),1)])])),_:1}),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{"default-active":e.$route.meta.active||e.$route.fullPath,onSelect:o.select,router:"","background-color":"#212d3d","text-color":"#fff","active-text-color":"#409EFF"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{navMenus:n.menu},null,8,["navMenus"])])),_:1},8,["default-active","onSelect"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var Z=i(49963);const Q={key:0,style:{padding:"20px"}},X=["href"],J={key:0,class:"menu-tag"},ee={key:1,class:"menu-tag"};function te(e,t,i,s,n,o){const u=(0,l.up)("el-alert"),r=(0,l.up)("el-icon"),m=(0,l.up)("el-menu-item"),c=(0,l.up)("NavMenu",!0),d=(0,l.up)("el-sub-menu");return(0,l.wg)(),(0,l.iD)(l.HY,null,[i.navMenus.length<=0?((0,l.wg)(),(0,l.iD)("div",Q,[(0,l.Wm)(u,{title:"No menu.",center:"",type:"info",closable:!1})])):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.navMenus,(e=>((0,l.wg)(),(0,l.iD)(l.HY,{key:e},[o.hasChildren(e)?((0,l.wg)(),(0,l.j4)(d,{key:1,index:e.path},{title:(0,l.w5)((()=>[e.meta&&e.meta.icon?((0,l.wg)(),(0,l.j4)(r,{key:0},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)((0,l.LL)(e.meta.icon||"el-icon-menu")))])),_:2},1024)):(0,l.kq)("",!0),(0,l._)("span",null,(0,a.zw)(e.meta.title),1),e.meta.tag?((0,l.wg)(),(0,l.iD)("span",ee,(0,a.zw)(e.meta.tag),1)):(0,l.kq)("",!0)])),default:(0,l.w5)((()=>[(0,l.Wm)(c,{navMenus:e.children},null,8,["navMenus"])])),_:2},1032,["index"])):((0,l.wg)(),(0,l.j4)(m,{key:0,index:e.path},{title:(0,l.w5)((()=>[(0,l._)("span",null,(0,a.zw)(e.meta.title),1),e.meta.tag?((0,l.wg)(),(0,l.iD)("span",J,(0,a.zw)(e.meta.tag),1)):(0,l.kq)("",!0)])),default:(0,l.w5)((()=>[e.meta&&"link"==e.meta.type?((0,l.wg)(),(0,l.iD)("a",{key:0,href:e.path,target:"_blank",onClick:t[0]||(t[0]=(0,Z.iM)((()=>{}),["stop"]))},null,8,X)):(0,l.kq)("",!0),e.meta&&e.meta.icon?((0,l.wg)(),(0,l.j4)(r,{key:1},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)((0,l.LL)(e.meta.icon||"el-icon-menu")))])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1032,["index"]))],64)))),128))],64)}var ie={name:"NavMenu",props:["navMenus"],data(){return{}},methods:{hasChildren(e){return e.children&&!e.children.every((e=>e.meta.hidden))}}},le=i(83744);const ae=(0,le.Z)(ie,[["render",te]]);var se=ae,ne={components:{NavMenu:se},data(){return{nav:!1,menu:[]}},computed:{},created(){var e=this.$router.sc_getMenu();this.menu=this.filterUrl(e)},watch:{},methods:{showMobileNav(e){var t=e.currentTarget.getAttribute("drag-flag");if("true"==t)return!1;this.nav=!0},select(){this.$refs.mobileNavBox.handleClose()},filterUrl(e){var t=[];return e&&e.forEach((e=>{if(e.meta=e.meta?e.meta:{},e.meta.hidden||"button"==e.meta.type)return!1;"iframe"==e.meta.type&&(e.path=`/i/${e.name}`),e.children&&e.children.length>0&&(e.children=this.filterUrl(e.children)),t.push(e)})),t}},directives:{drag(e){let t=e,i="",l="";t.onmousedown=function(e){let a=e.clientX-t.offsetLeft,s=e.clientY-t.offsetTop;return document.onmousemove=function(e){t.setAttribute("drag-flag",!0),i=(new Date).getTime();let l=e.clientX-a,n=e.clientY-s;n>0&&n<document.body.clientHeight-50&&(t.style.top=n+"px"),l>0&&l<document.body.clientWidth-50&&(t.style.left=l+"px")},document.onmouseup=function(){l=(new Date).getTime(),l-i>200&&t.setAttribute("drag-flag",!1),document.onmousemove=null,document.onmouseup=null},!1}}}};const oe=(0,le.Z)(ne,[["render",B],["__scopeId","data-v-a483418e"]]);var ue=oe;const re=e=>((0,l.dD)("data-v-d25726ee"),e=e(),(0,l.Cn)(),e),me={class:"adminui-topbar"},ce={class:"left-panel"},de=re((()=>(0,l._)("div",{class:"center-panel"},null,-1))),he={class:"right-panel"};function pe(e,t,i,s,n,o){const u=(0,l.up)("el-icon"),r=(0,l.up)("el-breadcrumb-item"),m=(0,l.up)("el-breadcrumb");return(0,l.wg)(),(0,l.iD)("div",me,[(0,l._)("div",ce,[(0,l.Wm)(m,{"separator-icon":"el-icon-arrow-right",class:"hidden-sm-and-down"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z.W3,{name:"breadcrumb"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.breadList,(e=>((0,l.wg)(),(0,l.iD)(l.HY,{key:e.title},["/"==e.path||e.meta.hiddenBreadcrumb?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(r,{key:e.meta.title},{default:(0,l.w5)((()=>[e.meta.icon?((0,l.wg)(),(0,l.j4)(u,{key:0,class:"icon"},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)((0,l.LL)(e.meta.icon)))])),_:2},1024)):(0,l.kq)("",!0),(0,l.Uk)((0,a.zw)(e.meta.title),1)])),_:2},1024))],64)))),128))])),_:1})])),_:1})]),de,(0,l._)("div",he,[(0,l.WI)(e.$slots,"default",{},void 0,!0)])])}var ge={data(){return{breadList:[]}},created(){this.getBreadcrumb()},watch:{$route(){this.getBreadcrumb()}},methods:{getBreadcrumb(){let e=this.$route.meta.breadcrumb;this.breadList=e}}};const fe=(0,le.Z)(ge,[["render",pe],["__scopeId","data-v-d25726ee"]]);var we=fe;const ke={class:"adminui-tags"},ve={ref:"tags"},_e=["onContextmenu"],ye=(0,l._)("hr",null,null,-1),be=(0,l._)("hr",null,null,-1);function $e(e,t,i,s,n,o){const u=(0,l.up)("el-icon-close"),r=(0,l.up)("el-icon"),m=(0,l.up)("router-link"),c=(0,l.up)("el-icon-refresh"),d=(0,l.up)("el-icon-folder-delete"),h=(0,l.up)("el-icon-full-screen"),p=(0,l.up)("el-icon-copy-document");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",ke,[(0,l._)("ul",ve,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.tagList,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e,class:(0,a.C_)([o.isActive(e)?"active":"",e.meta.affix?"affix":""]),onContextmenu:(0,Z.iM)((t=>o.openContextMenu(t,e)),["prevent"])},[(0,l.Wm)(m,{to:e},{default:(0,l.w5)((()=>[(0,l._)("span",null,(0,a.zw)(e.meta.title),1),e.meta.affix?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(r,{key:0,onClick:(0,Z.iM)((t=>o.closeSelectedTag(e)),["prevent","stop"])},{default:(0,l.w5)((()=>[(0,l.Wm)(u)])),_:2},1032,["onClick"]))])),_:2},1032,["to"])],42,_e)))),128))],512)]),(0,l.Wm)(Z.uT,{name:"el-zoom-in-top"},{default:(0,l.w5)((()=>[n.contextMenuVisible?((0,l.wg)(),(0,l.iD)("ul",{key:0,style:(0,a.j5)({left:n.left+"px",top:n.top+"px"}),class:"contextmenu",id:"contextmenu"},[(0,l._)("li",{onClick:t[0]||(t[0]=e=>o.refreshTab())},[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c)])),_:1}),(0,l.Uk)("刷新")]),ye,(0,l._)("li",{onClick:t[1]||(t[1]=e=>o.closeTabs()),class:(0,a.C_)(n.contextMenuItem.meta.affix?"disabled":"")},[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u)])),_:1}),(0,l.Uk)("关闭标签")],2),(0,l._)("li",{onClick:t[2]||(t[2]=e=>o.closeOtherTabs())},[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d)])),_:1}),(0,l.Uk)("关闭其他标签")]),be,(0,l._)("li",{onClick:t[3]||(t[3]=e=>o.maximize())},[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h)])),_:1}),(0,l.Uk)("最大化")]),(0,l._)("li",{onClick:t[4]||(t[4]=e=>o.openWindow())},[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p)])),_:1}),(0,l.Uk)("在新的窗口中打开")])],4)):(0,l.kq)("",!0)])),_:1})],64)}var Ce=i(51474),Te={name:"tags",data(){return{contextMenuVisible:!1,contextMenuItem:null,left:0,top:0,tagList:this.$store.state.viewTags.viewTags,tipDisplayed:!1}},props:{},watch:{$route(e){this.addViewTags(e),this.$nextTick((()=>{const e=this.$refs.tags;if(e&&e.scrollWidth>e.clientWidth){let t=e.querySelector(".active");t.scrollIntoView(),this.tipDisplayed||(this.$msgbox({type:"warning",center:!0,title:"提示",message:"当前标签数量过多，可通过鼠标滚轴滚动标签栏。关闭标签数量可减少系统性能消耗。",confirmButtonText:"知道了"}),this.tipDisplayed=!0)}}))},contextMenuVisible(e){const t=e=>{const t=document.getElementById("contextmenu");t&&!t.contains(e.target)&&this.closeMenu()};e?document.body.addEventListener("click",(e=>t(e))):document.body.removeEventListener("click",(e=>t(e)))}},created(){var e=this.$router.sc_getMenu(),t=this.treeFind(e,(e=>e.path==this.$CONFIG.DASHBOARD_URL));t&&(t.fullPath=t.path,this.addViewTags(t),this.addViewTags(this.$route))},mounted(){this.tagDrop(),this.scrollInit()},methods:{treeFind(e,t){for(const i of e){if(t(i))return i;if(i.children){const e=this.treeFind(i.children,t);if(e)return e}}return null},tagDrop(){const e=this.$refs.tags;Ce.ZP.create(e,{draggable:"li",animation:300})},addViewTags(e){e.name&&!e.meta.fullpage&&(this.$store.commit("pushViewTags",e),this.$store.commit("pushKeepLive",e.name))},isActive(e){return e.fullPath===this.$route.fullPath},closeSelectedTag(e,t=!0){const i=this.tagList.findIndex((t=>t.fullPath==e.fullPath));if(this.$store.commit("removeViewTags",e),this.$store.commit("removeIframeList",e),this.$store.commit("removeKeepLive",e.name),t&&this.isActive(e)){const e=this.tagList[i-1];e?this.$router.push(e):this.$router.push("/")}},openContextMenu(e,t){this.contextMenuItem=t,this.contextMenuVisible=!0,this.left=e.clientX+1,this.top=e.clientY+1,this.$nextTick((()=>{let t=document.getElementById("contextmenu");document.body.offsetWidth-e.clientX<t.offsetWidth&&(this.left=document.body.offsetWidth-t.offsetWidth+1,this.top=e.clientY+1)}))},closeMenu(){this.contextMenuItem=null,this.contextMenuVisible=!1},refreshTab(){this.contextMenuVisible=!1;const e=this.contextMenuItem;this.$route.fullPath!==e.fullPath&&this.$router.push({path:e.fullPath,query:e.query}),this.$store.commit("refreshIframe",e),setTimeout((()=>{this.$store.commit("removeKeepLive",e.name),this.$store.commit("setRouteShow",!1),this.$nextTick((()=>{this.$store.commit("pushKeepLive",e.name),this.$store.commit("setRouteShow",!0)}))}),0)},closeTabs(){var e=this.contextMenuItem;e.meta.affix||(this.closeSelectedTag(e),this.contextMenuVisible=!1)},closeOtherTabs(){var e=this.contextMenuItem;this.$route.fullPath!=e.fullPath&&this.$router.push({path:e.fullPath,query:e.query});var t=[...this.tagList];t.forEach((t=>{if(t.meta&&t.meta.affix||e.fullPath==t.fullPath)return!0;this.closeSelectedTag(t,!1)})),this.contextMenuVisible=!1},maximize(){var e=this.contextMenuItem;this.contextMenuVisible=!1,this.$route.fullPath!=e.fullPath&&this.$router.push({path:e.fullPath,query:e.query}),document.getElementById("app").classList.add("main-maximize")},openWindow(){var e=this.contextMenuItem,t=e.href||"/";e.meta.affix||this.closeSelectedTag(e),window.open(t),this.contextMenuVisible=!1},scrollInit(){const e=this.$refs.tags;function t(t){const i=t.wheelDelta||t.detail,l=1,a=-1;let s=0;s=3==i||i<0&&-3!=i?50*l:50*a,e.scrollLeft+=s}e.addEventListener("mousewheel",t,!1)||e.addEventListener("DOMMouseScroll",t,!1)}}};const We=(0,le.Z)(Te,[["render",$e]]);var Le=We;const xe=e=>((0,l.dD)("data-v-b72b65d2"),e=e(),(0,l.Cn)(),e),Oe={class:"user-bar"},Ie={class:"panel-item"},Me=xe((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},[(0,l._)("path",{d:"M478.33 433.6l-90-218a22 22 0 0 0-40.67 0l-90 218a22 22 0 1 0 40.67 16.79L316.66 406h102.67l18.33 44.39A22 22 0 0 0 458 464a22 22 0 0 0 20.32-30.4zM334.83 362L368 281.65L401.17 362z",fill:"currentColor"}),(0,l._)("path",{d:"M267.84 342.92a22 22 0 0 0-4.89-30.7c-.2-.15-15-11.13-36.49-34.73c39.65-53.68 62.11-114.75 71.27-143.49H330a22 22 0 0 0 0-44H214V70a22 22 0 0 0-44 0v20H54a22 22 0 0 0 0 44h197.25c-9.52 26.95-27.05 69.5-53.79 108.36c-31.41-41.68-43.08-68.65-43.17-68.87a22 22 0 0 0-40.58 17c.58 1.38 14.55 34.23 52.86 83.93c.92 1.19 1.83 2.35 2.74 3.51c-39.24 44.35-77.74 71.86-93.85 80.74a22 22 0 1 0 21.07 38.63c2.16-1.18 48.6-26.89 101.63-85.59c22.52 24.08 38 35.44 38.93 36.1a22 22 0 0 0 30.75-4.9z",fill:"currentColor"})],-1))),De={class:"panel-item"},Ee={class:"user-avatar"};function Ae(e,t,i,s,n,o){const u=(0,l.up)("el-icon-sunny"),r=(0,l.up)("el-icon"),m=(0,l.up)("el-icon-moon"),c=(0,l.up)("el-button"),d=(0,l.up)("el-dropdown-item"),h=(0,l.up)("el-dropdown-menu"),p=(0,l.up)("el-dropdown"),g=((0,l.up)("el-icon-full-screen"),(0,l.up)("el-icon-sort"),(0,l.up)("el-icon-chat-dot-round"),(0,l.up)("el-badge"),(0,l.up)("el-avatar")),f=((0,l.up)("el-empty"),(0,l.up)("el-scrollbar"),(0,l.up)("el-main"),(0,l.up)("el-footer"),(0,l.up)("el-container"),(0,l.up)("el-drawer")),w=(0,l.up)("el-icon-clock"),k=(0,l.up)("el-popover"),v=(0,l.up)("el-icon-arrow-down"),_=(0,l.up)("search"),y=(0,l.up)("el-dialog"),b=(0,l.up)("tasks");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",Oe,[(0,l._)("div",{class:"panel-item",onClick:t[0]||(t[0]=(...e)=>o.configDark&&o.configDark(...e))},[(0,l.wy)((0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u)])),_:1},512),[[Z.F8,n.config.dark]]),(0,l.wy)((0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m)])),_:1},512),[[Z.F8,!n.config.dark]])]),(0,l._)("div",Ie,[(0,l.Wm)(p,{trigger:"click",placement:"bottom-end",onCommand:o.configLang},{dropdown:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.lang,(e=>((0,l.wg)(),(0,l.j4)(d,{key:e.value,command:e,class:(0,a.C_)({selected:n.config.lang==e.value})},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.name),1)])),_:2},1032,["command","class"])))),128))])),_:1})])),default:(0,l.w5)((()=>[(0,l.Wm)(c,{link:""},{default:(0,l.w5)((()=>[Me])),_:1})])),_:1},8,["onCommand"])]),(0,l.kq)("",!0),(0,l.kq)("",!0),(0,l.kq)("",!0),(0,l._)("div",De,[(0,l.Wm)(k,{placement:"top-start",title:"Version",width:200,trigger:"hover",content:this.$CONFIG.APP_VER},{reference:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w)])),_:1})])),_:1},8,["content"]),(0,l._)("label",null,(0,a.zw)(this.appTimeFormat),1)]),(0,l.Wm)(p,{class:"user panel-item",trigger:"click",onCommand:o.handleUser},{dropdown:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{divided:"",command:"outLogin"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("user.logout")),1)])),_:1})])),_:1})])),default:(0,l.w5)((()=>[(0,l._)("div",Ee,[(0,l.Wm)(g,{size:30},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(n.userNameF),1)])),_:1}),(0,l._)("label",null,(0,a.zw)(n.userName),1),(0,l.Wm)(r,{class:"el-icon--right"},{default:(0,l.w5)((()=>[(0,l.Wm)(v)])),_:1})])])),_:1},8,["onCommand"])]),(0,l.Wm)(y,{modelValue:n.searchVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>n.searchVisible=e),width:700,title:"搜索",center:"","destroy-on-close":""},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{onSuccess:t[5]||(t[5]=e=>n.searchVisible=!1)})])),_:1},8,["modelValue"]),(0,l.Wm)(f,{modelValue:n.tasksVisible,"onUpdate:modelValue":t[7]||(t[7]=e=>n.tasksVisible=e),size:450,title:"任務中心","destroy-on-close":""},{default:(0,l.w5)((()=>[(0,l.Wm)(b)])),_:1},8,["modelValue"])],64)}i(82801);const Pe={class:"sc-search"},Ne={key:0,class:"sc-search-history"},Ve={class:"sc-search-result"},Ue={key:0,class:"sc-search-no-result"},qe={key:1},je=["onClick"],ze={class:"title"};function Fe(e,t,i,s,n,o){const u=(0,l.up)("el-input"),r=(0,l.up)("el-tag"),m=(0,l.up)("el-icon"),c=(0,l.up)("el-scrollbar");return(0,l.wg)(),(0,l.iD)("div",Pe,[(0,l.Wm)(u,{ref:"input",modelValue:n.input,"onUpdate:modelValue":t[0]||(t[0]=e=>n.input=e),placeholder:"搜索",size:"large",clearable:"","prefix-icon":"el-icon-search","trigger-on-focus":!1,onInput:o.inputChange},null,8,["modelValue","onInput"]),n.history.length>0?((0,l.wg)(),(0,l.iD)("div",Ne,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.history,((e,t)=>((0,l.wg)(),(0,l.j4)(r,{closable:"",effect:"dark",type:"info",key:e,onClick:t=>o.historyClick(e),onClose:e=>o.historyClose(t)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e),1)])),_:2},1032,["onClick","onClose"])))),128))])):(0,l.kq)("",!0),(0,l._)("div",Ve,[n.result.length<=0?((0,l.wg)(),(0,l.iD)("div",Ue,"暂无搜索结果")):((0,l.wg)(),(0,l.iD)("ul",qe,[(0,l.Wm)(c,{"max-height":"366px"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.result,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.path,onClick:t=>o.to(e)},[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)((0,l.LL)(e.icon||"el-icon-menu")))])),_:2},1024),(0,l._)("span",ze,(0,a.zw)(e.breadcrumb),1)],8,je)))),128))])),_:1})]))])])}var Re={data(){return{input:"",menu:[],result:[],history:[]}},mounted(){var e=this.$TOOL.data.get("SEARCH_HISTORY")||[];this.history=e;var t=this.$TOOL.data.get("MENU");this.filterMenu(t),this.$refs.input.focus()},methods:{inputChange(e){this.result=e?this.menuFilter(e):[]},filterMenu(e){e.forEach((e=>{if(e.meta.hidden||"button"==e.meta.type)return!1;"iframe"==e.meta.type&&(e.path=`/i/${e.name}`),e.children&&e.children.length>0&&!e.component?this.filterMenu(e.children):this.menu.push(e)}))},menuFilter(e){var t=[],i=this.menu.filter((t=>t.meta.title.toLowerCase().indexOf(e.toLowerCase())>=0||(t.name.toLowerCase().indexOf(e.toLowerCase())>=0||void 0))),l=this.$router.getRoutes(),a=i.map((e=>"link"==e.meta.type?l.find((t=>t.path=="/"+e.path)):l.find((t=>t.path==e.path))));return a.forEach((e=>{t.push({name:e.name,type:e.meta.type,path:"link"==e.meta.type?e.path.slice(1):e.path,icon:e.meta.icon,title:e.meta.title,breadcrumb:e.meta.breadcrumb.map((e=>e.meta.title)).join(" - ")})})),t},to(e){this.history.includes(this.input)||(this.history.push(this.input),this.$TOOL.data.set("SEARCH_HISTORY",this.history)),"link"==e.type?setTimeout((()=>{let t=document.createElement("a");t.style="display: none",t.target="_blank",t.href=e.path,document.body.appendChild(t),t.click(),document.body.removeChild(t)}),10):this.$router.push({path:e.path}),this.$emit("success",!0)},historyClick(e){this.input=e,this.inputChange(e)},historyClose(e){this.history.splice(e,1),this.history.length<=0?this.$TOOL.data.remove("SEARCH_HISTORY"):this.$TOOL.data.set("SEARCH_HISTORY",this.history)}}};const Se=(0,le.Z)(Re,[["render",Fe],["__scopeId","data-v-2bd43785"]]);var He=Se;const Ye=e=>((0,l.dD)("data-v-1d80f4cf"),e=e(),(0,l.Cn)(),e),Ge=Ye((()=>(0,l._)("h2",null,"没有正在执行的任务",-1))),Ke=Ye((()=>(0,l._)("p",{style:{"font-size":"14px",color:"#999","line-height":"1.5",margin:"0 40px"}},"在处理耗时过久的任务时为了不阻碍正在处理的工作，可在任务中心进行异步执行。",-1))),Be={class:"user-bar-tasks-item-body"},Ze={class:"taskIcon"},Qe={class:"taskMain"},Xe={class:"title"},Je={class:"bottom"},et={class:"state"},tt={class:"handler"};function it(e,t,i,s,n,o){const u=(0,l.up)("el-empty"),r=(0,l.up)("el-icon-paperclip"),m=(0,l.up)("el-icon"),c=(0,l.up)("el-icon-dataAnalysis"),d=(0,l.up)("el-tag"),h=(0,l.up)("el-button"),p=(0,l.up)("el-card"),g=(0,l.up)("el-main"),f=(0,l.up)("el-footer"),w=(0,l.up)("el-container"),k=(0,l.Q2)("time"),v=(0,l.Q2)("loading");return(0,l.wy)(((0,l.wg)(),(0,l.j4)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[0==n.tasks.length?((0,l.wg)(),(0,l.j4)(u,{key:0,"image-size":120},{description:(0,l.w5)((()=>[Ge])),default:(0,l.w5)((()=>[Ke])),_:1})):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.tasks,(e=>((0,l.wg)(),(0,l.j4)(p,{key:e.id,shadow:"hover",class:"user-bar-tasks-item"},{default:(0,l.w5)((()=>[(0,l._)("div",Be,[(0,l._)("div",Ze,["export"==e.type?((0,l.wg)(),(0,l.j4)(m,{key:0,size:20},{default:(0,l.w5)((()=>[(0,l.Wm)(r)])),_:1})):(0,l.kq)("",!0),"report"==e.type?((0,l.wg)(),(0,l.j4)(m,{key:1,size:20},{default:(0,l.w5)((()=>[(0,l.Wm)(c)])),_:1})):(0,l.kq)("",!0)]),(0,l._)("div",Qe,[(0,l._)("div",Xe,[(0,l._)("h2",null,(0,a.zw)(e.taskName),1),(0,l._)("p",null,[(0,l.wy)((0,l._)("span",null,null,512),[[k,e.createDate,void 0,{tip:!0}]]),(0,l.Uk)(" 创建")])]),(0,l._)("div",Je,[(0,l._)("div",et,["0"==e.state?((0,l.wg)(),(0,l.j4)(d,{key:0,type:"info"},{default:(0,l.w5)((()=>[(0,l.Uk)("执行中")])),_:1})):(0,l.kq)("",!0),"1"==e.state?((0,l.wg)(),(0,l.j4)(d,{key:1},{default:(0,l.w5)((()=>[(0,l.Uk)("完成")])),_:1})):(0,l.kq)("",!0)]),(0,l._)("div",tt,["1"==e.state?((0,l.wg)(),(0,l.j4)(h,{key:0,type:"primary",circle:"",icon:"el-icon-download",onClick:t=>o.download(e)},null,8,["onClick"])):(0,l.kq)("",!0)])])])])])),_:2},1024)))),128))])),_:1}),(0,l.Wm)(f,{style:{padding:"10px","text-align":"right"}},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{circle:"",icon:"el-icon-refresh",onClick:o.refresh},null,8,["onClick"])])),_:1})])),_:1})),[[v,n.loading]])}var lt={data(){return{loading:!1,tasks:[]}},mounted(){this.getData()},methods:{async getData(){this.loading=!0;var e=await this.$API.system.tasks.list.get();this.tasks=e.data,this.loading=!1},refresh(){this.getData()},download(e){let t=document.createElement("a");t.style="display: none",t.target="_blank",t.href=e.result,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}};const at=(0,le.Z)(lt,[["render",it],["__scopeId","data-v-1d80f4cf"]]);var st=at,nt=i(27484),ot={components:{search:He,tasks:st},data(){return{config:{lang:this.$TOOL.localStorage.get("APP_LANG")||this.$CONFIG.LANG,dark:this.$TOOL.localStorage.get("APP_DARK")||this.$CONFIG.DARK},lang:[{name:"繁體中文",value:"zh-tw"},{name:"简体中文",value:"zh-cn"},{name:"English",value:"en"}],userName:"",userNameF:"",searchVisible:!1,tasksVisible:!1,msg:!1,msgList:[],appTime:nt(),appTimeFormat:nt().format("YYYY-MM-DD HH:mm:ss"),sessionErrorCounter:0}},created(){var e=this.$TOOL.data.get("USER_INFO");this.userName=e.userName,this.userNameF=this.userName.substring(0,1);const t=this.$TOOL.localStorage.get("APP_DARK");this.config.dark=!!t,setInterval((()=>{this.appTime=this.appTime.add(1,"second"),this.appTimeFormat=this.appTime.format("YYYY-MM-DD HH:mm:ss"),this.$TOOL.data.set("APP_TIME",this.appTime)}),1e3),setInterval((()=>{this.keepSession(),this.checkVersion(),this.refreshToken()}),6e4),this.keepSession(),this.checkVersion()},watch:{"config.dark"(e){e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),this.$TOOL.localStorage.set("APP_DARK",e)},"config.lang"(e){this.$i18n.locale=e,this.$TOOL.localStorage.set("APP_LANG",e),location.reload()}},methods:{handleUser(e){"uc"==e&&this.$router.push({path:"/usercenter"}),"cmd"==e&&this.$router.push({path:"/cmd"}),"clearCache"==e&&this.$confirm("清除緩存會將系統初始化，包括登錄狀態、主題、語言設置等，是否繼續？","提示",{type:"info"}).then((()=>{const e=this.$loading();this.$TOOL.data.clear(),this.$router.replace({path:"/login"}),setTimeout((()=>{e.close(),location.reload()}),1e3)})).catch((()=>{})),"outLogin"==e&&this.$confirm("確認是否退出當前用戶？","提示",{type:"warning",confirmButtonText:"退出",confirmButtonClass:"el-button--danger"}).then((()=>{this.$router.replace({path:"/login"})})).catch((()=>{}))},screen(){var e=document.documentElement;this.$TOOL.screen(e)},showMsg(){this.msg=!0},markRead(){this.msgList=[]},search(){this.searchVisible=!0},tasks(){this.tasksVisible=!1},configDark(){this.config.dark=!this.config.dark},configLang(e){this.config.lang=e.value},checkVersion(){const e=this.$TOOL.data.get("APP_CONFIG");e&&this.$CONFIG.APP_VER!=e["Modact.UI.Version"]&&""!=e["Modact.UI.Version"]&&this.$message.warning("已更新版本 "+e["Modact.UI.Version"]+", 請按F5或重開程式自動更新.")},async keepSession(){try{var e=await this.$API.auth.session.get();if(e?.AppTime&&(this.appTime=nt(e.AppTime)),e?.UserPermission){let t=this.$TOOL.data.get("USER_INFO");t.role=e.UserPermission,this.$TOOL.data.set("USER_INFO",t)}e?.AppConfig&&this.$TOOL.data.set("APP_CONFIG",e.AppConfig)}catch(t){this.$message.warning(t)}},async refreshToken(){const e=this.$TOOL.data.get("TOKEN");if(null==e)return;const t=JSON.parse(atob(e.split(".")[1])),i=nt(new Date(0).setUTCSeconds(t.exp)),l=nt();if(l.isAfter(i.subtract(5,"minutes"))){let e=this.$TOOL.data.get("TOKEN_REFRESH");var a={RequestId:"",RequestTime:new Date,Functions:[{Id:"default",Fun:"AC/Auth/NewAccessTokenByRefreshToken",Params:{authorization:e}}]},s=await this.$API.auth.tokenRefresh.post(a);if(s?.Results?.default?.Success){const e=s.Results.default.Data.Access;this.$TOOL.data.set("TOKEN",e)}else l.isAfter(i)?this.$message.error("Session expired."):this.$message.error("Refresh token fail.")}}}};const ut=(0,le.Z)(ot,[["render",Ae],["__scopeId","data-v-b72b65d2"]]);var rt=ut;function mt(e,t,i,a,s,n){const o=(0,l.up)("el-alert"),u=(0,l.up)("el-divider"),r=(0,l.up)("el-switch"),m=(0,l.up)("el-form-item"),c=(0,l.up)("el-option"),d=(0,l.up)("el-select"),h=(0,l.up)("el-color-picker"),p=(0,l.up)("el-form");return(0,l.wg)(),(0,l.j4)(p,{ref:"form","label-width":"120px","label-position":"left",style:{padding:"0 20px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{title:"以下配置可实时预览，开发者可在 config/index.js 中配置默认值，非常不建议在生产环境下开放布局设置",type:"error",closable:!1}),(0,l.Wm)(u),(0,l.Wm)(m,{label:e.$t("user.nightmode")},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:s.dark,"onUpdate:modelValue":t[0]||(t[0]=e=>s.dark=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,l.Wm)(m,{label:e.$t("user.language")},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:s.lang,"onUpdate:modelValue":t[1]||(t[1]=e=>s.lang=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{label:"简体中文",value:"zh-cn"}),(0,l.Wm)(c,{label:"English",value:"en"})])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,l.Wm)(u),(0,l.Wm)(m,{label:"主题颜色"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:s.colorPrimary,"onUpdate:modelValue":t[2]||(t[2]=e=>s.colorPrimary=e),predefine:s.colorList},{default:(0,l.w5)((()=>[(0,l.Uk)(">")])),_:1},8,["modelValue","predefine"])])),_:1}),(0,l.Wm)(u),(0,l.Wm)(m,{label:"框架布局"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:s.layout,"onUpdate:modelValue":t[3]||(t[3]=e=>s.layout=e),placeholder:"请选择"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{label:"默认",value:"default"}),(0,l.Wm)(c,{label:"通栏",value:"header"}),(0,l.Wm)(c,{label:"经典",value:"menu"}),(0,l.Wm)(c,{label:"功能坞",value:"dock"})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(m,{label:"折叠菜单"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:s.menuIsCollapse,"onUpdate:modelValue":t[4]||(t[4]=e=>s.menuIsCollapse=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(m,{label:"标签栏"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:s.layoutTags,"onUpdate:modelValue":t[5]||(t[5]=e=>s.layoutTags=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(u)])),_:1},512)}var ct=i(23111),dt={data(){return{layout:this.$store.state.global.layout,menuIsCollapse:this.$store.state.global.menuIsCollapse,layoutTags:this.$store.state.global.layoutTags,lang:this.$TOOL.localStorage.get("APP_LANG")||this.$CONFIG.LANG,dark:this.$TOOL.localStorage.get("APP_DARK")||this.$CONFIG.DARK,colorList:["#409EFF","#009688","#536dfe","#ff5c93","#c62f2f","#fd726d"],colorPrimary:this.$TOOL.data.get("APP_COLOR")||this.$CONFIG.COLOR||"#409EFF"}},watch:{layout(e){this.$store.commit("SET_layout",e)},menuIsCollapse(){this.$store.commit("TOGGLE_menuIsCollapse")},layoutTags(){this.$store.commit("TOGGLE_layoutTags")},dark(e){e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),this.$TOOL.localStorage.set("APP_DARK",e)},lang(e){this.$i18n.locale=e,this.$TOOL.localStorage.set("APP_LANG",e)},colorPrimary(e){e||(e="#409EFF",this.colorPrimary="#409EFF"),document.documentElement.style.setProperty("--el-color-primary",e);for(let t=1;t<=9;t++)document.documentElement.style.setProperty(`--el-color-primary-light-${t}`,ct.Z.lighten(e,t/10));for(let t=1;t<=9;t++)document.documentElement.style.setProperty(`--el-color-primary-dark-${t}`,ct.Z.darken(e,t/10));this.$TOOL.data.set("APP_COLOR",e)}}};const ht=(0,le.Z)(dt,[["render",mt]]);var pt=ht;const gt={class:"iframe-pages"},ft=["src"];function wt(e,t,i,a,s,n){return(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",gt,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.iframeList,(t=>(0,l.wy)(((0,l.wg)(),(0,l.iD)("iframe",{key:t.meta.url,src:t.meta.url,frameborder:"0"},null,8,ft)),[[Z.F8,e.$route.meta.url==t.meta.url]]))),128))],512)),[[Z.F8,"iframe"==e.$route.meta.type]])}var kt={data(){return{}},watch:{$route(e){this.push(e)}},created(){this.push(this.$route)},computed:{iframeList(){return this.$store.state.iframe.iframeList},ismobile(){return this.$store.state.global.ismobile},layoutTags(){return this.$store.state.global.layoutTags}},mounted(){},methods:{push(e){"iframe"==e.meta.type?this.ismobile||!this.layoutTags?this.$store.commit("setIframeList",e):this.$store.commit("pushIframeList",e):!this.ismobile&&this.layoutTags||this.$store.commit("clearIframeList")}}};const vt=(0,le.Z)(kt,[["render",wt],["__scopeId","data-v-27bcc55e"]]);var _t=vt,yt={render(){},data(){return{logoutCount:this.$TOOL.data.get("AUTO_EXIT")}},mounted(){this.logoutCount&&(this.setNewAutoExitTime(),document.onclick=()=>{this.setNewAutoExitTime()},document.onmousemove=()=>{this.setNewAutoExitTime()},document.onkeydown=()=>{this.setNewAutoExitTime()},document.onscroll=()=>{this.setNewAutoExitTime()},window.autoExitTimer=window.setInterval(this.autoExitfun,1e3))},unmounted(){this.logoutCount&&(clearInterval(window.autoExitTimer),window.autoExitTimer=null)},methods:{setNewAutoExitTime(){window.autoExitTime=(new Date).getTime()},autoExitfun(){(new Date).getTime()-window.autoExitTime>60*this.logoutCount*1e3&&(clearInterval(window.autoExitTimer),window.autoExitTimer=null,this.$router.replace({path:"/login"}),this.clientRestartUrl())},clientRestartUrl(){window.chrome?.webview?.hostObjects?.customHost?.RestartUrl()}}},bt={name:"index",components:{SideM:ue,Topbar:we,Tags:Le,NavMenu:se,userbar:rt,setting:pt,iframeView:_t,autoExit:yt},data(){return{settingDialog:!1,menu:[],nextMenu:[],pmenu:{},active:""}},computed:{ismobile(){return this.$store.state.global.ismobile},layout(){return this.$store.state.global.layout},layoutTags(){return this.$store.state.global.layoutTags},menuIsCollapse(){return this.$store.state.global.menuIsCollapse}},created(){this.onLayoutResize(),window.addEventListener("resize",this.onLayoutResize);var e=this.$router.sc_getMenu();this.menu=this.filterUrl(e),this.showThis()},watch:{$route(){this.showThis()},layout:{handler(e){document.body.setAttribute("data-layout",e)},immediate:!0}},methods:{openSetting(){this.settingDialog=!0},onLayoutResize(){this.$store.commit("SET_ismobile",document.body.clientWidth<992)},showThis(){this.pmenu=this.$route.meta.breadcrumb?this.$route.meta.breadcrumb[0]:{},this.nextMenu=this.filterUrl(this.pmenu.children),this.$nextTick((()=>{this.active=this.$route.meta.active||this.$route.fullPath}))},showMenu(e){this.pmenu=e,this.nextMenu=this.filterUrl(e.children),e.children&&0!=e.children.length||!e.component||this.$router.push({path:e.path})},filterUrl(e){var t=[];return e&&e.forEach((e=>{if(e.meta=e.meta?e.meta:{},e.meta.hidden||"button"==e.meta.type)return!1;"iframe"==e.meta.type&&(e.path=`/i/${e.name}`),e.children&&e.children.length>0&&(e.children=this.filterUrl(e.children)),t.push(e)})),t},exitMaximize(){document.getElementById("app").classList.remove("main-maximize")}}};const $t=(0,le.Z)(bt,[["render",H]]);var Ct=$t}}]);