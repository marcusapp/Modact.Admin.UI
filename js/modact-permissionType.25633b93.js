"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[9232],{70702:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var i=a(66252),l=a(3577);const s={class:"left-panel"},o={class:"right-panel"},n={class:"right-panel-search"};function c(e,t,a,c,d,r){const m=(0,i.up)("el-button"),u=(0,i.up)("el-option"),h=(0,i.up)("el-select"),p=(0,i.up)("el-tooltip"),b=((0,i.up)("el-input"),(0,i.up)("el-header")),w=(0,i.up)("el-table-column"),f=(0,i.up)("el-tag"),v=(0,i.up)("el-popconfirm"),_=(0,i.up)("el-button-group"),$=(0,i.up)("mcTable"),g=(0,i.up)("el-main"),y=(0,i.up)("el-container"),k=(0,i.up)("save-dialog");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i.Wm)(m,{type:"primary",icon:"el-icon-plus",onClick:r.add,disabled:!this.$AUTH("Modact/PermissionType/Add")},null,8,["onClick","disabled"])]),(0,i._)("div",o,[(0,i._)("div",n,[(0,i.Wm)(h,{modelValue:this.isShowAllValue,"onUpdate:modelValue":t[0]||(t[0]=e=>this.isShowAllValue=e),change:r.table_refresh()},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.isShowAllOptions,(e=>((0,i.wg)(),(0,i.j4)(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","change"]),(0,i.kq)("",!0),(0,i.Wm)(p,{content:e.$t("common.reset"),placement:"top",effect:"light"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{type:"warning",icon:"el-icon-refresh-left",onClick:r.reset,plain:""},null,8,["onClick"])])),_:1},8,["content"])])])])),_:1}),(0,i.Wm)(g,{class:"nopadding"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{ref:"table",data:d.tableData,apiObj:d.apiObj,params:{...d.apiObjParams},"row-key":"id",onSelectionChange:r.selectionChange,hidePagination:"","scrollbar-always-on":"",border:"",size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{type:"selection",width:"50"}),(0,i.Wm)(w,{label:"#",type:"index",width:"50"}),(0,i.Wm)(w,{label:"PermissionTypeID",prop:"permission_type_id",width:"250","show-overflow-tooltip":"",sortable:""}),(0,i.Wm)(w,{label:"PermissionTypeName",prop:"permission_type_name",width:"300","show-overflow-tooltip":"",sortable:""}),(0,i.Wm)(w,{label:e.$t("common.status"),prop:"is_void",width:"80"},{default:(0,i.w5)((t=>[t.row.is_void?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(f,{key:0,type:"success",round:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.$t("common.active")),1)])),_:1})),t.row.is_void?((0,i.wg)(),(0,i.j4)(f,{key:1,type:"danger",round:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.$t("common.void")),1)])),_:1})):(0,i.kq)("",!0)])),_:1},8,["label"]),(0,i.Wm)(w,{label:e.$t("common.remark"),prop:"remark","min-width":"150","show-overflow-tooltip":""},null,8,["label"]),(0,i.Wm)(w,{label:e.$t("common.createTime"),prop:"create_time",width:"180"},null,8,["label"]),(0,i.Wm)(w,{label:e.$t("common.createUser"),prop:"create_user_name",width:"180"},null,8,["label"]),(0,i.Wm)(w,{label:e.$t("common.modifyTime"),prop:"modify_time",width:"180"},null,8,["label"]),(0,i.Wm)(w,{label:e.$t("common.modifyUser"),prop:"modify_user_name",width:"180"},null,8,["label"]),(0,i.Wm)(w,{label:e.$t("common.voidTime"),prop:"void_switch_time",width:"180"},null,8,["label"]),(0,i.Wm)(w,{label:e.$t("common.voidUser"),prop:"void_switch_user_name",width:"180"},null,8,["label"]),(0,i.Wm)(w,{label:e.$t("common.operate"),fixed:"right",align:"left",width:"180"},{default:(0,i.w5)((t=>[(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,{text:"",type:"primary",size:"small",onClick:e=>r.table_show(t.row,t.$index)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.$t("common.view")),1)])),_:2},1032,["onClick"]),(0,i.Wm)(m,{text:"",type:"warning",size:"small",onClick:e=>r.table_edit(t.row,t.$index)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.$t("common.edit")),1)])),_:2},1032,["onClick"]),!1===t.row.is_void&&this.$AUTH("Modact/PermissionType/Void")?((0,i.wg)(),(0,i.j4)(v,{key:0,title:e.$t("common.confirmVoid"),onConfirm:e=>r.table_void(t.row,t.$index)},{reference:(0,i.w5)((()=>[(0,i.Wm)(m,{text:"",type:"danger",size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.$t("common.void")),1)])),_:1})])),_:2},1032,["title","onConfirm"])):(0,i.kq)("",!0),!0===t.row.is_void&&this.$AUTH("Modact/PermissionType/VoidUndo")?((0,i.wg)(),(0,i.j4)(v,{key:1,title:e.$t("common.confirmVoidUndo"),onConfirm:e=>r.table_voidundo(t.row,t.$index)},{reference:(0,i.w5)((()=>[(0,i.Wm)(m,{text:"",type:"success",size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.$t("common.active")),1)])),_:1})])),_:2},1032,["title","onConfirm"])):(0,i.kq)("",!0)])),_:2},1024)])),_:1},8,["label"])])),_:1},8,["data","apiObj","params","onSelectionChange"])])),_:1})])),_:1}),d.dialog.save?((0,i.wg)(),(0,i.j4)(k,{key:0,ref:"saveDialog",onSuccess:r.handleSaveSuccess,onClosed:t[2]||(t[2]=e=>d.dialog.save=!1)},null,8,["onSuccess"])):(0,i.kq)("",!0)],64)}var d=a(54694),r={name:"modact/permissionType",components:{saveDialog:d["default"]},data(){return{dialog:{save:!1},apiObj:null,apiObjParams:{orderBy:"",whereConditions:{},whereQuery:""},tableData:null,tableDataListObj:this.$API.modact.permissionType.list,tableDataListActiveObj:this.$API.modact.permissionType.listActive,tableDataListVoidObj:this.$API.modact.permissionType.listVoid,tableRowVoidObj:this.$API.modact.permissionType.void,tableRowVoidUndoObj:this.$API.modact.permissionType.voidundo,selection:[],search:{keyword:""},isShowAllValue:"active",isShowAllOptions:[{value:"active",label:this.$t("common.active")},{value:"void",label:this.$t("common.void")},{value:"all",label:this.$t("common.all")}]}},mounted(){this.table_refresh()},methods:{reset(){this.search.keyword="",this.isShowAllValue="active",null==this.apiObj?this.getListData(this.isShowAllValue):this.$refs.table.reload({...this.apiObjParams})},table_refresh(){null==this.apiObj?this.getListData(this.isShowAllValue):this.$refs.table.upData({...this.apiObjParams})},add(){this.dialog.save=!0,this.$nextTick((()=>{this.$refs.saveDialog.open().setData()}))},table_edit(e){this.dialog.save=!0,this.$nextTick((()=>{this.$refs.saveDialog.open("edit").setData(e)}))},table_show(e){this.dialog.save=!0,this.$nextTick((()=>{this.$refs.saveDialog.open("show").setData(e)}))},async table_void(e){const t=await this.tableRowVoidObj.post(e);1==t.Results.default.Success&&(this.table_refresh(),this.$message.success(this.$t("common.successVoid")))},async table_voidundo(e){const t=await this.tableRowVoidUndoObj.post(e);1==t.Results.default.Success&&(this.table_refresh(),this.$message.success(this.$t("common.successVoidUndo")))},async batch_void(){this.$alert(this.$t("common.msgFunctionNotAvailable"),this.$t("common.hint"),{type:"error"})},selectionChange(e){this.selection=e},changeSwitch(e,t){t.status="1"==t.status?"0":"1",t.$switch_status=!0,setTimeout((()=>{delete t.$switch_status,t.status=e,this.$message.success(this.$t("common.successOperate"))}),500)},upsearch(){this.table_refresh()},filterTree(e){let t=null;function a(i){i.forEach((i=>{i.id==e&&(t=i),i.children&&a(i.children)}))}return a(this.$refs.table.tableData),t},handleSaveSuccess(e,t){("add"==t||"edit"==t)&&this.table_refresh()},async getListData(e){let t=null;switch(e){case"all":t=await this.tableDataListObj.get();break;case"active":t=await this.tableDataListActiveObj.get();break;case"void":t=await this.tableDataListVoidObj.get();break}1==t?.Results?.default?.Success&&t?.Results?.default?.Data&&(this.tableData=t?.Results?.default?.Data)}}},m=a(83744);const u=(0,m.Z)(r,[["render",c]]);var h=u}}]);