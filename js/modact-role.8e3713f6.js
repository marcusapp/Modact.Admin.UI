"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[9939],{54821:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var l=a(66252),s=a(3577);const i={class:"left-panel"},o={class:"right-panel"},n={class:"right-panel-search"};function d(e,t,a,d,c,r){const m=(0,l.up)("el-button"),u=(0,l.up)("el-option"),h=(0,l.up)("el-select"),b=(0,l.up)("el-tooltip"),p=((0,l.up)("el-input"),(0,l.up)("el-header")),w=(0,l.up)("el-table-column"),f=(0,l.up)("el-tag"),g=(0,l.up)("el-popconfirm"),v=(0,l.up)("el-button-group"),_=(0,l.up)("mcTable"),$=(0,l.up)("el-main"),k=(0,l.up)("el-container"),y=(0,l.up)("save-dialog"),D=(0,l.up)("assign-dialog");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)(m,{type:"primary",icon:"el-icon-plus",onClick:r.add,disabled:!this.$AUTH("Modact/Role/Add")},null,8,["onClick","disabled"])]),(0,l._)("div",o,[(0,l._)("div",n,[(0,l.Wm)(h,{modelValue:this.isShowAllValue,"onUpdate:modelValue":t[0]||(t[0]=e=>this.isShowAllValue=e),change:r.table_refresh()},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.isShowAllOptions,(e=>((0,l.wg)(),(0,l.j4)(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","change"]),(0,l.kq)("",!0),(0,l.Wm)(b,{content:e.$t("common.reset"),placement:"top",effect:"light"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{type:"warning",icon:"el-icon-refresh-left",onClick:r.reset,plain:""},null,8,["onClick"])])),_:1},8,["content"])])])])),_:1}),(0,l.Wm)($,{class:"nopadding"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{ref:"table",data:c.tableData,apiObj:c.apiObj,params:{...c.apiObjParams},"row-key":"id",onSelectionChange:r.selectionChange,hidePagination:"","scrollbar-always-on":"",border:"",size:"small"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{type:"selection",width:"50"}),(0,l.Wm)(w,{label:"#",type:"index",width:"50"}),(0,l.Wm)(w,{label:"RoleID",prop:"role_id",width:"100",sortable:""}),(0,l.Wm)(w,{label:"RoleName",prop:"role_name",width:"250",sortable:""}),(0,l.Wm)(w,{label:"IsSystem",prop:"is_system",width:"80"}),(0,l.Wm)(w,{label:e.$t("common.status"),prop:"is_void",width:"80"},{default:(0,l.w5)((t=>[t.row.is_void?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(f,{key:0,type:"success",round:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("common.active")),1)])),_:1})),t.row.is_void?((0,l.wg)(),(0,l.j4)(f,{key:1,type:"danger",round:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("common.void")),1)])),_:1})):(0,l.kq)("",!0)])),_:1},8,["label"]),(0,l.Wm)(w,{label:e.$t("common.remark"),prop:"remark","min-width":"150","show-overflow-tooltip":""},null,8,["label"]),(0,l.Wm)(w,{label:e.$t("common.createTime"),prop:"create_time",width:"180"},null,8,["label"]),(0,l.Wm)(w,{label:e.$t("common.createUser"),prop:"create_user_name",width:"180"},null,8,["label"]),(0,l.Wm)(w,{label:e.$t("common.modifyTime"),prop:"modify_time",width:"180"},null,8,["label"]),(0,l.Wm)(w,{label:e.$t("common.modifyUser"),prop:"modify_user_name",width:"180"},null,8,["label"]),(0,l.Wm)(w,{label:e.$t("common.voidTime"),prop:"void_switch_time",width:"180"},null,8,["label"]),(0,l.Wm)(w,{label:e.$t("common.voidUser"),prop:"void_switch_user_name",width:"180"},null,8,["label"]),(0,l.Wm)(w,{label:e.$t("common.operate"),fixed:"right",align:"left",width:"220"},{default:(0,l.w5)((t=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{text:"",type:"success",size:"small",onClick:e=>r.assign_open(t.row,t.$index)},{default:(0,l.w5)((()=>[(0,l.Uk)("Assign")])),_:2},1032,["onClick"]),(0,l.Wm)(m,{text:"",type:"primary",size:"small",onClick:e=>r.table_show(t.row,t.$index)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("common.view")),1)])),_:2},1032,["onClick"]),(0,l.Wm)(m,{text:"",type:"warning",size:"small",onClick:e=>r.table_edit(t.row,t.$index),disabled:t.row.is_system},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("common.edit")),1)])),_:2},1032,["onClick","disabled"]),!1===t.row.is_void&&this.$AUTH("Modact/Role/Void")?((0,l.wg)(),(0,l.j4)(g,{key:0,title:e.$t("common.confirmVoid"),onConfirm:e=>r.table_void(t.row,t.$index)},{reference:(0,l.w5)((()=>[(0,l.Wm)(m,{text:"",type:"danger",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("common.void")),1)])),_:1})])),_:2},1032,["title","onConfirm"])):(0,l.kq)("",!0),!0===t.row.is_void&&this.$AUTH("Modact/Role/VoidUndo")?((0,l.wg)(),(0,l.j4)(g,{key:1,title:e.$t("common.confirmVoidUndo"),onConfirm:e=>r.table_voidundo(t.row,t.$index)},{reference:(0,l.w5)((()=>[(0,l.Wm)(m,{text:"",type:"success",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("common.active")),1)])),_:1})])),_:2},1032,["title","onConfirm"])):(0,l.kq)("",!0)])),_:2},1024)])),_:1},8,["label"])])),_:1},8,["data","apiObj","params","onSelectionChange"])])),_:1})])),_:1}),c.dialog.save?((0,l.wg)(),(0,l.j4)(y,{key:0,ref:"saveDialog",onSuccess:r.handleSaveSuccess,onClosed:t[2]||(t[2]=e=>c.dialog.save=!1)},null,8,["onSuccess"])):(0,l.kq)("",!0),c.dialog.assign?((0,l.wg)(),(0,l.j4)(D,{key:1,ref:"assignDialog",onSuccess:r.handleSaveSuccess,onClosed:t[3]||(t[3]=e=>c.dialog.assign=!1)},null,8,["onSuccess"])):(0,l.kq)("",!0)],64)}var c=a(65447),r=a(39105),m={name:"modact/role",components:{saveDialog:c["default"],assignDialog:r["default"]},data(){return{dialog:{save:!1,assign:!1},apiObj:null,apiObjParams:{orderBy:"",whereConditions:{},whereQuery:""},tableData:null,tableDataListObj:this.$API.modact.role.list,tableDataListActiveObj:this.$API.modact.role.listActive,tableDataListVoidObj:this.$API.modact.role.listVoid,tableRowVoidObj:this.$API.modact.role.void,tableRowVoidUndoObj:this.$API.modact.role.voidundo,selection:[],search:{keyword:""},isShowAllValue:"active",isShowAllOptions:[{value:"active",label:this.$t("common.active")},{value:"void",label:this.$t("common.void")},{value:"all",label:this.$t("common.all")}]}},mounted(){this.table_refresh()},methods:{reset(){this.search.keyword="",this.isShowAllValue="active",null==this.apiObj?this.getListData(this.isShowAllValue):this.$refs.table.reload({...this.apiObjParams})},table_refresh(){null==this.apiObj?this.getListData(this.isShowAllValue):this.$refs.table.upData({...this.apiObjParams})},add(){this.dialog.save=!0,this.$nextTick((()=>{this.$refs.saveDialog.open().setData()}))},assign_open(e){this.dialog.assign=!0,this.$nextTick((()=>{this.$refs.assignDialog.open().setData(e)}))},table_edit(e){this.dialog.save=!0,this.$nextTick((()=>{this.$refs.saveDialog.open("edit").setData(e)}))},table_show(e){this.dialog.save=!0,this.$nextTick((()=>{this.$refs.saveDialog.open("show").setData(e)}))},async table_void(e){const t=await this.tableRowVoidObj.post(e);1==t.Results.default.Success&&(this.table_refresh(),this.$message.success(this.$t("common.successVoid")))},async table_voidundo(e){const t=await this.tableRowVoidUndoObj.post(e);1==t.Results.default.Success&&(this.table_refresh(),this.$message.success(this.$t("common.successVoidUndo")))},async batch_void(){this.$alert(this.$t("common.msgFunctionNotAvailable"),this.$t("common.hint"),{type:"error"})},selectionChange(e){this.selection=e},changeSwitch(e,t){t.status="1"==t.status?"0":"1",t.$switch_status=!0,setTimeout((()=>{delete t.$switch_status,t.status=e,this.$message.success(this.$t("common.successOperate"))}),500)},upsearch(){this.table_refresh()},filterTree(e){let t=null;function a(l){l.forEach((l=>{l.id==e&&(t=l),l.children&&a(l.children)}))}return a(this.$refs.table.tableData),t},handleSaveSuccess(e,t){("add"==t||"edit"==t)&&this.table_refresh()},async getListData(e){let t=null;switch(e){case"all":t=await this.tableDataListObj.get();break;case"active":t=await this.tableDataListActiveObj.get();break;case"void":t=await this.tableDataListVoidObj.get();break}1==t?.Results?.default?.Success&&t?.Results?.default?.Data&&(this.tableData=t?.Results?.default?.Data)}}},u=a(83744);const h=(0,u.Z)(m,[["render",d]]);var b=h}}]);